function addmessages(e,t){document.getElementById("chatiy").innerHTML="",localStorage.setItem("cth",e),document.getElementById("textarea").style.display="block",document.getElementById("send").style.display="block",document.getElementById("chattop").style.display="block",document.getElementById("chatiy").style.display="block",firestore.collection(e).doc("Chat_Info").get().then(e=>{let t=e.data();document.getElementById("chattop").innerHTML="";let i=`<img style="border-radius:50px;  width:50px; height:50px; margin-top:5px; margin-left:10px; display:inline-block; vertical-align:middle;" src="${t.Image}"><p style="position: relative; top:5px; left:15px;padding-top:10px; display:inline-block; font-family:Roboto">${t.name}</p> <img id="videocall" style="width:35px; height:35px; position: relative; top:20px; left:255px; display:inline-block;" src="Images/video call.png"><img id="voicecall" style="width:35px; height:35px; position: relative; top:20px; left:275px; display:inline-block;" src="Images/voice call.png">`;document.getElementById("chattop").innerHTML+=i}),firestore.collection(e).where("IsMessage","==",!1).limit(20).get().then(e=>{e.docs.forEach(e=>{let i=e.data(),l=i.Message;firestore.collection("users").doc(i.WhoIsTheMessageFrom).get().then(e=>{let t=e.data().Profile;localStorage.setItem("pi",t)}),messageadd(localStorage.getItem("pi"),l,i.WhoIsTheMessageFrom,t,i.Message,i.ImageSrc)})})}function messageadd(e,t,i,l,a,o){if(i!=l)if(firestore.collection("users").doc(i).get().then(e=>{let t=e.data().Profile;localStorage.setItem("pi",t)}),null!=a){let e=`<div  id="message" style="margin-top:5px; margin-left:20px; float:left; clear:both; display:block">\n                <img style="width: 40px; height: 40px; display: inline-block; border-radius:50px; " src="${localStorage.getItem("pi")}" alt=""><div style="font-size: 11.52px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(212, 212, 212); border-radius: 10px; display: inline-block; color: black; width: auto; height: auto; padding-bottom: 10px; padding-left: 10px; margin-left: 10px; padding-right: 10px;  padding-top: 15px; word-wrap: break-word; max-width:300px; margin-top:10px;  ">${t}</div>\n                </div>`;document.getElementById("chatiy").innerHTML+=e}else{let e=`<div id="message" style="margin-top:5px;margin-left:20px; float:left; clear:both; display:block">\n                <img style="width: 40px; height: 40px; display: inline-block; border-radius:50px; " src="${localStorage.getItem("pi")}" alt=""><img style="display:inline-block; width:100px; height:150px; border-radius:14px; margin-left:10px; margin-top:10px; " src="${o}">\n                </div>`;document.getElementById("chatiy").innerHTML+=e}else if(null!=a){let i=`<div  id="message" style="margin-top:5px;float:right; clear:both; display:inline-block; margin-right:10px;">\n                <div style="font-size: 11.52px; font-family: Arial, Helvetica, sans-serif; background-image:linear-gradient( rgb(255, 196, 0),  orange); border-radius: 10px; display: inline-block; color: black; width: auto; height: auto; padding-bottom: 10px; padding-left: 10px; margin-left: 10px; padding-right: 10px;  padding-top: 15px; word-wrap: break-word; max-width:300px; margin-top:10px; color:white;  ">${t}</div>\n                <img style = "float:right; clear:both; width: 40px; height: 40px; display: inline-block; border-radius:50px; margin-left:10px;  " src="${e}"></div>`;document.getElementById("chatiy").innerHTML+=i}else{let t=`<div id="message" style="margin-top:5px;float:right; clear:both; display:inline-block;  margin-right:10px;">\n                <img style="display:inline-block; width:100px; height:150px; border-radius:14px; margin-left:10px; margin-top:10px; " src="${o}">\n                <img style = "float:right; clear:both; width: 40px; height: 40px; display: inline-block; border-radius:50px;margin-left:10px;   " src="${e}"></div>`;document.getElementById("chatiy").innerHTML+=t}var n=document.getElementById("chatiy");n.scrollTop=n.scrollHeight}